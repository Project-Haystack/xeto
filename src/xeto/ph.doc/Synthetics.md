<!--
title:      Synthetics
author:     Mike Melillo & Jan Široký
created:    2 Aug 2024
copyright:  Copyright (c) 2023, Project-Haystack
-->

# Overview

Synthetics are modeled with the [ph::PhEntity.synthetic] tag. Synthetic refers to any data that
does not come from a physical sensor or device. Instead, any synthetic data, and
associated subtypes, are generated by some methodology;
e.g., energy simulation, machine learning, etc.


The tag [ph::PhEntity.synthetic] extends from [ph::PointFunction]. This means that any [ph::PhEntity.synthetic],
or child of that type, is **not** also a [ph::PhEntity.sensor], [ph::PhEntity.sp], or [ph::PhEntity.cmd].
Conceptually, the data modeled by synthetics is introduced via some *external* source
other than the local entities within a physical space, e.g., an energy model or
machine learning algorithm.

# Tags

Synthetic is an abstract [ph::PointFunction] for any synthetic data. In practice, any
[ph::SyntheticPoint] should be specifically defined based on the methodology
used to generate its data. Current subtypes include:
- [ph::PhEntity.sim]
- [ph::PhEntity.ml]
- [ph::PhEntity.computed].

A [ph::PhEntity.point] leveraging this ontology would be tagged as a [ph::SimPoint], [ph::MlPoint],
or [ph::ComputedPoint].

Each synthetic type can further prescribe necessary tags based on use case
and that methodology's requirements to model other parameters.

# Structure

Any [ph::SyntheticPoint] should define a [ph::PhEntity.pointRef] tag identifying the [ph::PhEntity.sensor] it models.
The default structure is assumed to be an [ph::PhEntity.equip] containing both [ph::PhEntity.sensor] and [ph::PhEntity.synthetic] points.
This structure is not explicitly prescribed, should the need or use case arise to separate
related [ph::PhEntity.sensor]s and [ph::PhEntity.synthetic]s into different [ph::PhEntity.equip]s.

An example structure is provided below:

    //example, ahu with a discharge air temp sensor & synthetic point in the same equip
    id: @site
    site
    dis: "Acme Co"
    --
    id: @space
    space
    dis:"Space"
    siteRef: @site
    --
    id: @ahu01
    equip
    ahu
    dis:"AHU 01"
    spaceRef: @space
    siteRef: @site
    --
    id: @dat
    point
    discharge
    air
    temp
    sensor
    --
    id: @synthDat
    point
    discharge
    air
    temp
    //sim, ml, and computed all valid here
    sim
    pointRef: @dat
    equipRef: @ahu01
    siteRef: @site


# Synthetic Models

The concept of a [ph::PhEntity.syntheticModel] is also introduced with this ontology.
The [ph::PhEntity.syntheticModel] is a first-class entity to identify the collection of algorithm,
application, parameters, and other settings used to generate a set of data for one or
more [ph::SyntheticPoint]s.

The term [ph::PhEntity.syntheticModel] is used instead of the more generic term model to avoid confusion
or overlap with other concepts. Synthetic model is then extended to different types of
**fooModel** for each kind of synthetic subtytpe. For all models, [ph::PhEntity.syntheticModelRef] is
used as to point a [ph::SyntheticPoint] (of any subtype) back to its respective model.

A [ph::SyntheticPoint] should only ever have one [ph::PhEntity.syntheticModelRef] target.

Synthetic Models are a container for relevant information that generated any
[ph::SyntheticPoint] related to it. This relevant information will differ greatly depending on
the sub-type of model, the application, and even practitioner's preferences or tookits.
As such, there are no generic tags that apply across each model type.

Current [ph::PhEntity.syntheticModel] subtypes incldue:

- [ph::PhEntity.simModel]
- [ph::PhEntity.mlModel]
- [ph::PhEntity.computedModel]

# Simulation Overview
Simulation points are generated from a physics based model, typically some form of
black or gray box energy model.

Sample [ph::PhEntity.sim] implementation including a [ph::PhEntity.simModel]:

      id: @simModel
      dis: "Operational Sim Model"
      simOperation //see below for simScenario detail
      simModel
      ---
      id: @vav
      navName: VAV
      vav
      equip
      ---
      id:@point
      navName: DAT-Sensor
      equipRef: @vav
      point
      his
      discharge
      air
      temp
      sensor
      ---
      id:@simPoint
      navName: Sim-Point
      equipRef: @vav
      pointRef: @point
      syntheticModelRef: @simModel
      point
      his
      discharge
      air
      temp
      sim

In this example, both the [ph::SimPoint] and the [ph::PhEntity.point] are nested under the same [ph::PhEntity.equip].
This is not necessary, but is suggested as a convention. This documentation may be
updated in the future to reflect the community's adoption/implementation of this schema.

## simScenario

[ph::SimScenario] is used as a choice to identify different simulation options, tagged on the [ph::PhEntity.simModel].

For example, a physics-based whole-building sustainability modeling can create numerous
decarbonization scenarios of energy conservation measures and bundles of measures for consideration.

Right now, [ph::SimScenario] is the only introduced tag for [ph::PhEntity.simModel]s.
This is provided as a useful example for how practitioners can add other defs as the
need arises.

This proposal introduces three (3) base [ph::SimScenario]s, but practitioners may add further
ad hoc cases by using 'is: simScenario' for their own custom definitions.
Current [ph::SimScenario]s include:

- [ph::PhEntity.simOperation]
- [ph::PhEntity.simBaseline]
- [ph::PhEntity.simOptimum]

# Computed
Computed is a stub out for simple computational data (be it `curVal` or `his` data).

# Machine Learning Overview
A machine learning model (ML) is a synthetic construct whose parameters are derived from
historical data. Machine learning, a branch of artificial intelligence, offers a wide range
of algorithms to choose from. This ontology specifically addresses supervised learning and
models with multiple inputs and a single output (MISO models).

Key details, such as the specific type of machine learning algorithm or its hyperparameters,
are deliberately left out to allow for user-specific customization. This ontology captures
only the essential and most general characteristics.

## mlModel
The [ph::PhEntity.mlModel] entity represents a machine learning model and encapsulates all relevant
information, including:

 - [ph::PhEntity.mlIdentificationPeriod]: Time span defining the training period.
 - [ph::PhEntity.mlModelParameters]: Result of model identification.
 - [ph::PhEntity.mlModelMetrics]: Goodness-of-fit metrics provided in the form of a simple dictionary.

Additionally, [ph::PhEntity.mlModel] includes references to both input and output variables through
[ph::PhEntity.mlInputVarRefs] and [ph::PhEntity.mlOutputVarRef], respectively. These utilize [ph::PhEntity.mlVar] tag.

The [ph::PhEntity.mlVar] entity serves as a reference for the model's input variables (also known as
independent variables) and the model's output variable (also known as the dependent variable
or target). Each [ph::PhEntity.mlVar] is linked to a specific point via [ph::PhEntity.mlVarPoint] tag.
Alternatively [ph::PhEntity.mlVarFilter] can be used for referencing a point.
